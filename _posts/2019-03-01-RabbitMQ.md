---
layout:     post
title:      RabbitMQ
subtitle:   学习分享之RabbitMQ
date:       2019-03-01
author:     pengfeng
header-img: img/mq-share.jpg
catalog: true
tags:
    - 技术分享
    - MQ
---

# RabbitMQ
## 一、使用场景
什么是消息中间件？它有什么作用呢？他为什么能完成这样的功能呢？带着这三个疑问又开始了对消息中间件的探索。

### 1、消息队列

#### 1.1什么是消息队列
*消息队列，即MQ，Message Queue。维基百科中提到消息队列是一种进程间通信或同一进程的不同线程间的通信方式，
软件的贮列用来处理一系列的输入，通常是来自用户。消息队列提供了异步的通信协议，每一个贮列中的纪录包
含详细说明的数据，包含发生的时间，输入设备的种类，以及特定的输入参数，也就是说：消息的发送者和接收者不
需要同时与消息队列交互。消息会保存在队列中，直到接收者取回它。*
    
结合上面的解释不难得出结论

- 消息队列是典型的生产者、消费者模型。生产者不断向消息队列中生产消息，消费者不断的从队列中获取消息。
- 消息队列是异步的。因为消息的生产和消费都是异步的，而且只关心消息的发送和接收，没有业务逻辑的侵入，这样就实现了生产者和消费者的解耦。

### 2、AMQP和JMS
结合前面得MQ消息队列，发现得出具体的实现还需了解AMQP和JMS

目前实现MQ的两种主流方式：AMQP和JMS。

**AMQP**
![](http://47.100.206.217/group1/M00/00/00/rBAYR1x4_XuAbwopAAKWLz-mk7w284.png)


**JMS**
![](http://47.100.206.217/group1/M00/00/00/rBAYR1x4_eWAKeekAAPWO7wXCjk123.png)

根据维基百科给出的解释大概总结几点：

- AMQP是通过规定协议来统一数据交互的格式
- AMQP只是协议，不规定实现方式，因此是跨语言的
- AMQP的消息模型更加丰富

- JMS是定义了统一的接口，来对消息操作进行统一
- JMS限定了必须使用Java语言
- JMS规定了两种消息模型

### 3、Erlang语言

![](http://47.100.206.217/group1/M00/00/00/rBAYR1x5BCaANVqEAAOiyxjdTmc704.png)

---

> RabbitMQ基于erlang语言开发，采用AMQP协议 

我也是道听途说，这里不多做介绍

## 二、RabbitMQ安装教程

### 1、上传文件
 将安装所需的文件上传到服务器(文件可到官网下载)，如下图所示：
![](http://47.100.206.217/group1/M00/00/00/rBAYR1ydv1WATtWMAAMc6SJMps0531.png)
    
### 2、安装
本次直接采用yum仓库安装

    cd /mq
    yum install esl-erlang_17.3-1~centos~6_amd64.rpm
    yum install esl-erlang-compat-R14B-1.el6.noarch.rpm
    rpm -ivh rabbitmq-server-3.4.1-1.noarch.rpm

### 3、修改配置文件
将配置文件复制到：

    cp /usr/share/doc/rabbitmq-server-3.4.1/rabbitmq.config.example /etc/rabbitmq/rabbitmq.config

修改配置：
    
    vim /etc/rabbitmq/rabbitmq.config

将配置文件改为
![](http://47.100.206.217/group1/M00/00/00/rBAYR1ydv42AYupOAANR0Ptcp3c078.png)

此配置的目的是开启远程访问

    chkconfig rabbitmq-server on        开机自启
    service rabbitmq-server start       启动
    service rabbitmq-server stop        停止
    service rabbitmq-server restart     重启

这里可以开启web管理页面
    
    rabbitmq-plugins enable rabbitmq_management
    //重启mq
    service rabbitmq-server restart
    
经过一系列操作 
- 创建账号
- 登录控制台

![](http://47.100.206.217/group1/M00/00/00/rBAYR1ydyXKAFjkMAAUvREP7uUU223.png)



